<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FlightlessManacotti: runtime/src/thirdparty/amp/src/c/amp/amp_thread_local_slot.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>runtime/src/thirdparty/amp/src/c/amp/amp_thread_local_slot.h File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &lt;stddef.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="amp__memory_8h_source.html">amp/amp_memory.h</a>&gt;</code><br/>

<p><a href="amp__thread__local__slot_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__local__slot_8h.html#a3e34afe2dd675c3efffc2de628740c42">AMP_THREAD_LOCAL_SLOT_UNINITIALIZED</a>&nbsp;&nbsp;&nbsp;NULL</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__local__slot_8h.html#a0ff7ef30e0bd5d9019a73a8eb2bdf6e7">amp_thread_local_slot_create</a> (amp_thread_local_slot_key_t *key, amp_allocator_t allocator)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__local__slot_8h.html#a7bea272b36cdbce401cda6c1f8e6d4e5">amp_thread_local_slot_destroy</a> (amp_thread_local_slot_key_t *key, amp_allocator_t allocator)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__local__slot_8h.html#a6fe896193141d942fa223b5d59dcb515">amp_thread_local_slot_set_value</a> (amp_thread_local_slot_key_t key, void *<a class="el" href="smart_8lua.html#ae68f6bfcb0d3e0f6c78343b7e68d23e9">value</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__local__slot_8h.html#afe71e8f464273292a9091367c69c2d51">amp_thread_local_slot_value</a> (amp_thread_local_slot_key_t key)</td></tr>
</table>
<hr/><a name="_details"></a><h2> </h2>
<p>Shallow wrapper around Pthreads thread-specific data or Windows thread-local storage.</p>
<p>On creation of a thread-local slot a key is returned and each thread creates its own local slot to store data in it. Whatever thread is using the key via the get and set value functions accesses its own local slot.</p>
<p>On creation of a new thread it creates local slots for all existing keys.</p>
<p>On destruction of a key the thread local slots associated with it from all threads are destroyed, too. The developer has to care for memory and resource management for the values stored in slots as the slot destruction won't care for the values. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a3e34afe2dd675c3efffc2de628740c42"></a><!-- doxytag: member="amp_thread_local_slot.h::AMP_THREAD_LOCAL_SLOT_UNINITIALIZED" ref="a3e34afe2dd675c3efffc2de628740c42" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AMP_THREAD_LOCAL_SLOT_UNINITIALIZED&nbsp;&nbsp;&nbsp;NULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a0ff7ef30e0bd5d9019a73a8eb2bdf6e7"></a><!-- doxytag: member="amp_thread_local_slot.h::amp_thread_local_slot_create" ref="a0ff7ef30e0bd5d9019a73a8eb2bdf6e7" args="(amp_thread_local_slot_key_t *key, amp_allocator_t allocator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amp_thread_local_slot_create </td>
          <td>(</td>
          <td class="paramtype">amp_thread_local_slot_key_t *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">amp_allocator_t&nbsp;</td>
          <td class="paramname"> <em>allocator</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a thread-local slot for all threads (including the main thread) whose value can be accessed via the identifier stored in <em>key</em>. The initial value in the slot belonging to key is NULL.</p>
<p>Each thread has to set the value of its own slot.</p>
<p>If the initialization fails the allocator is called to free the already allocated memory which must not result in an error or otherwise behavior is undefined.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>AMP_SUCCESS on successful slot creation. AMP_ERROR if system resource are insufficient or the max slot count has been exceeded. AMP_NOMEM if the system has insufficient memory to create the key. Other error codes might be returned to signal errors while creating, too. These are programming errors and mustn't occur in release code. When <em>amp</em> is compiled without NDEBUG set it might assert that these programming errors don't happen. AMP_ERROR if the key can't be stored in the argument.</dd></dl>
<dl class="attention"><dt><b>Attention:</b></dt><dd>key mustn't be NULL. </dd></dl>

</div>
</div>
<a class="anchor" id="a7bea272b36cdbce401cda6c1f8e6d4e5"></a><!-- doxytag: member="amp_thread_local_slot.h::amp_thread_local_slot_destroy" ref="a7bea272b36cdbce401cda6c1f8e6d4e5" args="(amp_thread_local_slot_key_t *key, amp_allocator_t allocator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amp_thread_local_slot_destroy </td>
          <td>(</td>
          <td class="paramtype">amp_thread_local_slot_key_t *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">amp_allocator_t&nbsp;</td>
          <td class="paramname"> <em>allocator</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Invalidates <em>key</em>.</p>
<p>Destroying a slot doesn't deallocate the memory that might be associated with the data stored in the different thread-local slots, therefore remove the data on all threads first if necessary.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>AMP_SUCCESS on successful finalization. Error codes might be returned to signal errors while finalization, too. These are programming errors and mustn't occur in release code. When <em>amp</em> is compiled without NDEBUG set it might assert that these programming errors don't happen. AMP_ERROR if the key is invalid.</dd></dl>
<dl class="attention"><dt><b>Attention:</b></dt><dd>Trying to access a slot via an invalid, e.g. finalized key, results in undefined behavior. </dd></dl>

</div>
</div>
<a class="anchor" id="a6fe896193141d942fa223b5d59dcb515"></a><!-- doxytag: member="amp_thread_local_slot.h::amp_thread_local_slot_set_value" ref="a6fe896193141d942fa223b5d59dcb515" args="(amp_thread_local_slot_key_t key, void *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amp_thread_local_slot_set_value </td>
          <td>(</td>
          <td class="paramtype">amp_thread_local_slot_key_t&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Store a value in the slot identified by key.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>AMP_SUCCESS on success. AMP_NOMEM if the system has insufficient memory to associate the value with the key. Error codes might be returned to signal errors while setting the value, too. These are programming errors and mustn't occur in release code. When <em>amp</em> is compiled without NDEBUG set it might assert that these programming errors don't happen. AMP_ERROR if the key is invalid.</dd></dl>
<dl class="attention"><dt><b>Attention:</b></dt><dd>NULL is a special value - for <em>amp</em> it means that the slot is empty.</dd>
<dd>
Trying to access a slot via an invalid, e.g. finalized key, results in undefined behavior. </dd></dl>

</div>
</div>
<a class="anchor" id="afe71e8f464273292a9091367c69c2d51"></a><!-- doxytag: member="amp_thread_local_slot.h::amp_thread_local_slot_value" ref="afe71e8f464273292a9091367c69c2d51" args="(amp_thread_local_slot_key_t key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* amp_thread_local_slot_value </td>
          <td>(</td>
          <td class="paramtype">amp_thread_local_slot_key_t&nbsp;</td>
          <td class="paramname"> <em>key</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Query the slot via its key for its value.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Current value stored in the slot associated with the key for the thread calling the function or NULL if the slot is empty.</dd></dl>
<dl class="attention"><dt><b>Attention:</b></dt><dd>Trying to access a slot via an invalid, e.g. finalized key, results in undefined behavior. </dd></dl>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Oct 12 2011 15:00:35 for FlightlessManacotti by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
