<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FlightlessManacotti: runtime/src/thirdparty/amp/src/c/amp/amp_thread_array.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>runtime/src/thirdparty/amp/src/c/amp/amp_thread_array.h File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &lt;stddef.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="amp__memory_8h_source.html">amp/amp_memory.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="amp__thread_8h_source.html">amp/amp_thread.h</a>&gt;</code><br/>

<p><a href="amp__thread__array_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__array_8h.html#a8393f7249a20220107da7e50bcb4af76">AMP_THREAD_ARRAY_UNINITIALIZED</a>&nbsp;&nbsp;&nbsp;NULL</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct amp_thread_array_s *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__array_8h.html#aacace5962efe2a0f87194c0c88779456">amp_thread_array_create</a> (<a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a> *thread_array, amp_allocator_t allocator, size_t thread_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__array_8h.html#aed511fdc642a3ff5283d735ce5c34085">amp_thread_array_destroy</a> (<a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a> *thread_array, amp_allocator_t allocator)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__array_8h.html#af447f5d5eb139b3647e8a50ea007b0a1">amp_thread_array_configure_contexts</a> (<a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a> thread_array, size_t range_begin, size_t range_length, void *shared_context)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__array_8h.html#a83fd919d7db8ee8bfb0a4baceef83c36">amp_thread_array_configure_functions</a> (<a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a> thread_array, size_t range_begin, size_t range_length, <a class="el" href="amp__thread_8h.html#a223b27680c75168bc1d06729a7b6f19d">amp_thread_func_t</a> shared_function)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__array_8h.html#aae2994faf5154eaa60e42159d084c042">amp_thread_array_configure</a> (<a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a> thread_array, size_t range_begin, size_t range_length, void *shared_context, <a class="el" href="amp__thread_8h.html#a223b27680c75168bc1d06729a7b6f19d">amp_thread_func_t</a> shared_function)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__array_8h.html#ac7befff83094db20c80555ff153d8ecc">amp_thread_array_launch_all</a> (<a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a> thread_array, size_t *joinable_thread_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__array_8h.html#a7023d834a2bdfe0985ca63025fe8ef3c">amp_thread_array_join_all</a> (<a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a> thread_array, size_t *joinable_thread_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="amp__thread__array_8h.html#a7c523b241b2c4c1800ee39b5621720af">amp_thread_array_get_joinable_thread_count</a> (<a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a> thread_array, size_t *joinable_thread_count)</td></tr>
</table>
<hr/><a name="_details"></a><h2> </h2>
<p>Group of amp threads to launch and join with all contained threads without the need to handle individual threads. After creation all threads of the thread array need to be configured via the configure functions before the thread array's threads can be all launched.</p>
<p>Never pass an invalid, e.g. non-created thread array to any of the thread array functions other than the create functions.</p>
<p>Creation and destruction of threads, and especially a thread array is expensive and shouldn't be done in a tight loop. The amp_thread_array is targeted at simplifying writing of unit and stress tests that need groups of threads and for building thread or job pools that keep their threads alive for a long time. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a8393f7249a20220107da7e50bcb4af76"></a><!-- doxytag: member="amp_thread_array.h::AMP_THREAD_ARRAY_UNINITIALIZED" ref="a8393f7249a20220107da7e50bcb4af76" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AMP_THREAD_ARRAY_UNINITIALIZED&nbsp;&nbsp;&nbsp;NULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a946b6087bf0fe5607dd23792b25b3b54"></a><!-- doxytag: member="amp_thread_array.h::amp_thread_array_t" ref="a946b6087bf0fe5607dd23792b25b3b54" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct amp_thread_array_s* <a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Opaque type representing an amp thread array. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aae2994faf5154eaa60e42159d084c042"></a><!-- doxytag: member="amp_thread_array.h::amp_thread_array_configure" ref="aae2994faf5154eaa60e42159d084c042" args="(amp_thread_array_t thread_array, size_t range_begin, size_t range_length, void *shared_context, amp_thread_func_t shared_function)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amp_thread_array_configure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a>&nbsp;</td>
          <td class="paramname"> <em>thread_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>range_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>range_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>shared_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="amp__thread_8h.html#a223b27680c75168bc1d06729a7b6f19d">amp_thread_func_t</a>&nbsp;</td>
          <td class="paramname"> <em>shared_function</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets range_length thread array thread contexts and functions starting at index range_begin to shared_context and shared_function.</p>
<p>If an error is returned it us not defined if or which of the thread contexts or functions of the array have been changed.</p>
<p>range_length must not be greater than the size of thread_array. range_length must not be 0. All indices from range_begin inside range_length must be inside the index range of thread_array. shared_function must not be NULL or invalid.</p>
<p>Do not call after launching and before joining with a thread array.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>AMP_SUCCESS on successful configuration. Other error codes might be returned to signal errors, too. These are programming errors and must not occur in release code. When <em>amp</em> is compiled without NDEBUG set it might assert that these errors do not happen. AMP_ERROR might be returned if the arguments are invalid. AMP_BUSY might be returned if the thread array is already launched. </dd></dl>

</div>
</div>
<a class="anchor" id="af447f5d5eb139b3647e8a50ea007b0a1"></a><!-- doxytag: member="amp_thread_array.h::amp_thread_array_configure_contexts" ref="af447f5d5eb139b3647e8a50ea007b0a1" args="(amp_thread_array_t thread_array, size_t range_begin, size_t range_length, void *shared_context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amp_thread_array_configure_contexts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a>&nbsp;</td>
          <td class="paramname"> <em>thread_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>range_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>range_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>shared_context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets range_length thread array thread contexts starting at index range_begin to shared_context.</p>
<p>If an error is returned it is not defined if or which of the thread contexts of the array have been changed.</p>
<p>range_length must not be greater than the size of thread_array. range_length must not be 0. All indices from range_begin inside range_length must be inside the index range of thread_array.</p>
<p>Do not call after launching and before joining with a thread array.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>AMP_SUCCESS on successful configuration. Other error codes might be returned to signal errors, too. These are programming errors and must not occur in release code. When <em>amp</em> is compiled without NDEBUG set it might assert that these errors do not happen. AMP_ERROR might be returned if the arguments are invalid. AMP_BUSY might be returned if the thread array is already launched. </dd></dl>

</div>
</div>
<a class="anchor" id="a83fd919d7db8ee8bfb0a4baceef83c36"></a><!-- doxytag: member="amp_thread_array.h::amp_thread_array_configure_functions" ref="a83fd919d7db8ee8bfb0a4baceef83c36" args="(amp_thread_array_t thread_array, size_t range_begin, size_t range_length, amp_thread_func_t shared_function)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amp_thread_array_configure_functions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a>&nbsp;</td>
          <td class="paramname"> <em>thread_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>range_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>range_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="amp__thread_8h.html#a223b27680c75168bc1d06729a7b6f19d">amp_thread_func_t</a>&nbsp;</td>
          <td class="paramname"> <em>shared_function</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets range_length thread array thread functions starting at index range_begin to shared_function.</p>
<p>If an error is returned it us not defined if or which of the thread functions of the array have been changed.</p>
<p>range_length must not be greater than the size of thread_array. range_length must not be 0. All indices from range_begin inside range_length must be inside the index range of thread_array. shared_function must not be NULL or invalid.</p>
<p>Do not call after launching and before joining with a thread array.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>AMP_SUCCESS on successful configuration. Other error codes might be returned to signal errors, too. These are programming errors and must not occur in release code. When <em>amp</em> is compiled without NDEBUG set it might assert that these errors do not happen. AMP_ERROR might be returned if the arguments are invalid. AMP_BUSY might be returned if the thread array is already launched. </dd></dl>

</div>
</div>
<a class="anchor" id="aacace5962efe2a0f87194c0c88779456"></a><!-- doxytag: member="amp_thread_array.h::amp_thread_array_create" ref="aacace5962efe2a0f87194c0c88779456" args="(amp_thread_array_t *thread_array, amp_allocator_t allocator, size_t thread_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amp_thread_array_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a> *&nbsp;</td>
          <td class="paramname"> <em>thread_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">amp_allocator_t&nbsp;</td>
          <td class="paramname"> <em>allocator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>thread_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allocates memory and creates a thread array that needs to be configured before launching it.</p>
<p>Behavior is undefined if thread_array represents an already (non-destroyed) created thread array.</p>
<p>If the initialization fails the allocator is called to free the already allocated memory which must not result in an error or otherwise behavior is undefined.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>AMP_SUCCESS on successful creation of thread_group. On error the following error codes are returned: AMP_NOMEM if not enough memory is available. Other error codes might be returned to signal errors, too. These are programming errors and mustn't occur in release code. When <em>amp</em> is compiled without NDEBUG set it might assert that these programming errors don't happen. AMP_ERROR is returned if thread_array, thread_count, or allocator are NULL. On error no memory is leaked.</dd></dl>
<p>TODO:</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000030">Todo:</a></b></dt><dd>Decide if to allow <code>0</code> as a thread count. </dd></dl>

</div>
</div>
<a class="anchor" id="aed511fdc642a3ff5283d735ce5c34085"></a><!-- doxytag: member="amp_thread_array.h::amp_thread_array_destroy" ref="aed511fdc642a3ff5283d735ce5c34085" args="(amp_thread_array_t *thread_array, amp_allocator_t allocator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amp_thread_array_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a> *&nbsp;</td>
          <td class="paramname"> <em>thread_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">amp_allocator_t&nbsp;</td>
          <td class="paramname"> <em>allocator</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Finalizes the thread array and frees its memory.</p>
<p>If any thread array's threads have been launched they must be joined before destroying the array. It isn't done automatically because joining can block and the amp user must know what she is doing and explicitly decide how to handle shutdown.</p>
<p>allocator_context and dealloc_func must be able to free the memory allocated by the allocator_context and alloc_func arguments used when calling amp_thread_array_create in thread_array otherwise behavior is undefined. Error codes might be returned but the thread_array might be in an invalid and non-rescueable state. Memory might be leaked.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>AMP_SUCCESS is returned on successful finalization of the thread array and after its memory is freed. On error the following error codes might be returned: Other error codes might be returned to signal errors, too. These are programming errors and mustn't occur in release code. When <em>amp</em> is compiled without NDEBUG set it might assert that these programming errors don't happen. AMP_BUSY is returned if not all launched threads of the array have been joined. AMP_ERROR is returned if thread_array or allocator are NULL. </dd></dl>

</div>
</div>
<a class="anchor" id="a7c523b241b2c4c1800ee39b5621720af"></a><!-- doxytag: member="amp_thread_array.h::amp_thread_array_get_joinable_thread_count" ref="a7c523b241b2c4c1800ee39b5621720af" args="(amp_thread_array_t thread_array, size_t *joinable_thread_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amp_thread_array_get_joinable_thread_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a>&nbsp;</td>
          <td class="paramname"> <em>thread_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>joinable_thread_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of joinable threads in the variable joinable_thread_count points to.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>AMP_SUCCESS if the joinable thread count could be determined successfully. Other error codes might be returned to signal errors, too. These are programming errors and mustn't occur in release code. When <em>amp</em> is compiled without NDEBUG set it might assert that these programming errors don't happen. </dd></dl>

</div>
</div>
<a class="anchor" id="a7023d834a2bdfe0985ca63025fe8ef3c"></a><!-- doxytag: member="amp_thread_array.h::amp_thread_array_join_all" ref="a7023d834a2bdfe0985ca63025fe8ef3c" args="(amp_thread_array_t thread_array, size_t *joinable_thread_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amp_thread_array_join_all </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a>&nbsp;</td>
          <td class="paramname"> <em>thread_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>joinable_thread_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Joins with all joinable threads of the thread array.</p>
<p>Threads are launched from left to right and joined from right to left. On the first thread that can't be joined the joining stops and the error code of the internal amp_raw_thread_join function is returned. If joinable_thread_count isn't NULL the number of remaining un-joined threads "left" from the non-joinable thread is returned in it.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>AMP_SUCCESS if all joinable threads have been joined with. Other error codes might be returned to signal errors, too. These are programming errors and mustn't occur in release code. When <em>amp</em> is compiled without NDEBUG set it might assert that these programming errors don't happen. AMP_ERROR might be returned by the internally called amp_raw_thread_join on error. </dd></dl>

</div>
</div>
<a class="anchor" id="ac7befff83094db20c80555ff153d8ecc"></a><!-- doxytag: member="amp_thread_array.h::amp_thread_array_launch_all" ref="ac7befff83094db20c80555ff153d8ecc" args="(amp_thread_array_t thread_array, size_t *joinable_thread_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amp_thread_array_launch_all </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="amp__thread__array_8h.html#a946b6087bf0fe5607dd23792b25b3b54">amp_thread_array_t</a>&nbsp;</td>
          <td class="paramname"> <em>thread_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>joinable_thread_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Launches the contained threads one after the other and stops if thread launching fails. The number of threads launched is returned in joinable if the pointer is not NULL. If not all threads could be launched nothing is done other then returning AMP_ERROR or AMP_NOMEM and the threads that could be launched are running or are about to run.</p>
<p>Call join_all to join with the launched threads.</p>
<p>You can handle non-launcheable threads of a thread array in at least three ways: </p>
<ol>
<li>
Terminate the app if the number of launched threads doesn't equal the number of threads the thread array should have launched. Call join all on the thread array if you want to end the application in a coordinated way.  </li>
<li>
Order the thread contexts and functions so that even if not all threads of the array could be launched the launched threads are able to work with each other and don't need the non-launched threads (functions).  </li>
<li>
Re-run launch as often until joinable indicates that all threads of the thread array have been launched and can therefore be joined. Be careful with join all counts between launch all calls as launch all will try to launch non-launched and also already joined threads.  </li>
</ol>
<p>In all cases it makes sense to code the thread functions so the launch process runs through two stages (launch threads into "orbit" and after all necessary thread functions signaled that they are in orbit let them start their work). Each thread function uses a condition variable to signal that it wants to proceed after it has been launched. The condition variable predicate can then signal that the function should proceed or that it should shut down, e.g. if not all necessary threads could have been launched.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>AMP_SUCCESS on successful launch of all launcheable threads of the thread array. AMP_ERROR is returned if the system lacks the resources for thread creation and launching. Other error codes might be returned to signal errors, too. These are programming errors and mustn't occur in release code. When <em>amp</em> is compiled without NDEBUG set it might assert that these programming errors don't happen. </dd></dl>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Oct 12 2011 15:00:35 for FlightlessManacotti by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
